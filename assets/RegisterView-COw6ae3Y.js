import{R as v,s as R,u as C,_ as B,t as N,a as U}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-CkWQ3NDV.js";import{d as $,a as T,u as A,f as F,g as j,w as d,e,b,c as D,h as E,i as s,t,j as u,k as c,r as I,o as V}from"./index-ZcRV7itf.js";import{_ as x}from"./FormInput.vue_vue_type_script_setup_true_lang-BLbuITmm.js";import{_ as y}from"./PasswordInput.vue_vue_type_script_setup_true_lang-B7vgH7hf.js";const L={key:0,class:"bg-warm-error/10 border border-warm-error text-warm-error px-4 py-3 rounded-xl text-sm animate-shake"},W={class:"text-center text-sm text-warm-text-secondary"},M=$({__name:"RegisterView",setup(q){const P=F(),n=T(),{t:r}=A(),S=v.extend({confirmPassword:R()}).refine(l=>l.password===l.confirmPassword,{message:"两次输入的密码不一致",path:["confirmPassword"]}),{handleSubmit:k,errors:i,defineField:m}=C({validationSchema:N(S)}),[p]=m("email"),[f]=m("name"),[g]=m("password"),[w]=m("confirmPassword"),_=k(async l=>{const{email:o,name:h,password:a}=l;await n.register({email:o,name:h,password:a})&&P.push("/")});return(l,o)=>{const h=I("router-link");return V(),j(B,{title:e(r)("register.title")},{default:d(()=>[b("form",{class:"space-y-6",onSubmit:o[4]||(o[4]=(...a)=>e(_)&&e(_)(...a))},[e(n).error?(V(),D("div",L,t(e(n).error),1)):E("",!0),s(x,{modelValue:e(p),"onUpdate:modelValue":o[0]||(o[0]=a=>u(p)?p.value=a:null),label:e(r)("login.email"),placeholder:e(r)("login.emailPlaceholder"),type:"email",error:e(i).email},null,8,["modelValue","label","placeholder","error"]),s(x,{modelValue:e(f),"onUpdate:modelValue":o[1]||(o[1]=a=>u(f)?f.value=a:null),label:e(r)("register.name"),placeholder:e(r)("register.namePlaceholder"),type:"text",error:e(i).name},null,8,["modelValue","label","placeholder","error"]),s(y,{modelValue:e(g),"onUpdate:modelValue":o[2]||(o[2]=a=>u(g)?g.value=a:null),label:e(r)("login.password"),placeholder:e(r)("login.passwordPlaceholder"),error:e(i).password,"show-strength":""},null,8,["modelValue","label","placeholder","error"]),s(y,{modelValue:e(w),"onUpdate:modelValue":o[3]||(o[3]=a=>u(w)?w.value=a:null),label:e(r)("register.confirmPassword"),placeholder:e(r)("register.confirmPasswordPlaceholder"),error:e(i).confirmPassword},null,8,["modelValue","label","placeholder","error"]),s(U,{loading:e(n).loading,"full-width":""},{loading:d(()=>[c(t(e(r)("register.submitting")),1)]),default:d(()=>[c(" "+t(e(r)("register.submit")),1)]),_:1},8,["loading"]),b("p",W,[c(t(e(r)("register.hasAccount"))+" ",1),s(h,{to:"/login",class:"text-warm-primary hover:text-warm-primary-hover font-medium transition-colors"},{default:d(()=>[c(t(e(r)("register.loginLink")),1)]),_:1})])],32)]),_:1},8,["title"])}}});export{M as default};
